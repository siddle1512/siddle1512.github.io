import{a as ue,g as me,s as he,_ as M,r as h,u as xe,b as pe,j as e,c as ge,d as fe,k as _e,E as Ke,$ as re,a0 as je,w as _,I as K,t as C,V as F,X as U,Y as H,M as S,A as L,K as Q,G as Ye,T as Y,P as y,B as Te,C as Pe,S as Ae,n as Qe,H as ie,J as Ze,N as Xe,O as Je,v as et,Q as De,Z as tt,W as rt}from"./index-98796e33.js";import{a as G}from"./axios-a342f982.js";import{D as oe,a as le,b as ce,c as de}from"./DialogTitle-61df68e4.js";import{T as ne,a as A,C as Oe,b as nt,c as st,d as at,e as it,f as ot,g as lt}from"./TableSortLabel-9403fd01.js";import"./label-8863b2a1.js";import{C as ct}from"./Container-00550331.js";function dt(t){return ue("MuiCardActions",t)}me("MuiCardActions",["root","spacing"]);const ut=["disableSpacing","className"],mt=t=>{const{classes:n,disableSpacing:r}=t;return fe({root:["root",!r&&"spacing"]},dt,n)},ht=he("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:r}=t;return[n.root,!r.disableSpacing&&n.spacing]}})(({ownerState:t})=>M({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),xt=h.forwardRef(function(n,r){const a=xe({props:n,name:"MuiCardActions"}),{disableSpacing:s=!1,className:o}=a,m=pe(a,ut),d=M({},a,{disableSpacing:s}),c=mt(d);return e.jsx(ht,M({className:ge(c.root,o),ownerState:d,ref:r},m))}),pt=xt;function gt(t){return ue("MuiCardContent",t)}me("MuiCardContent",["root"]);const ft=["className","component"],jt=t=>{const{classes:n}=t;return fe({root:["root"]},gt,n)},Ct=he("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,n)=>n.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),yt=h.forwardRef(function(n,r){const a=xe({props:n,name:"MuiCardContent"}),{className:s,component:o="div"}=a,m=pe(a,ft),d=M({},a,{component:o}),c=jt(d);return e.jsx(Ct,M({as:o,className:ge(c.root,s),ownerState:d,ref:r},m))}),vt=yt,bt=h.createContext(),ke=bt;function wt(t){return ue("MuiGrid",t)}const St=[0,1,2,3,4,5,6,7,8,9,10],Nt=["column-reverse","column","row-reverse","row"],Wt=["nowrap","wrap-reverse","wrap"],J=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],ee=me("MuiGrid",["root","container","item","zeroMinWidth",...St.map(t=>`spacing-xs-${t}`),...Nt.map(t=>`direction-xs-${t}`),...Wt.map(t=>`wrap-xs-${t}`),...J.map(t=>`grid-xs-${t}`),...J.map(t=>`grid-sm-${t}`),...J.map(t=>`grid-md-${t}`),...J.map(t=>`grid-lg-${t}`),...J.map(t=>`grid-xl-${t}`)]),It=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Z(t){const n=parseFloat(t);return`${n}${String(t).replace(String(n),"")||"px"}`}function Dt({theme:t,ownerState:n}){let r;return t.breakpoints.keys.reduce((a,s)=>{let o={};if(n[s]&&(r=n[s]),!r)return a;if(r===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(r==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const m=re({values:n.columns,breakpoints:t.breakpoints.values}),d=typeof m=="object"?m[s]:m;if(d==null)return a;const c=`${Math.round(r/d*1e8)/1e6}%`;let j={};if(n.container&&n.item&&n.columnSpacing!==0){const p=t.spacing(n.columnSpacing);if(p!=="0px"){const W=`calc(${c} + ${Z(p)})`;j={flexBasis:W,maxWidth:W}}}o=M({flexBasis:c,flexGrow:0,maxWidth:c},j)}return t.breakpoints.values[s]===0?Object.assign(a,o):a[t.breakpoints.up(s)]=o,a},{})}function kt({theme:t,ownerState:n}){const r=re({values:n.direction,breakpoints:t.breakpoints.values});return je({theme:t},r,a=>{const s={flexDirection:a};return a.indexOf("column")===0&&(s[`& > .${ee.item}`]={maxWidth:"none"}),s})}function Ee({breakpoints:t,values:n}){let r="";Object.keys(n).forEach(s=>{r===""&&n[s]!==0&&(r=s)});const a=Object.keys(t).sort((s,o)=>t[s]-t[o]);return a.slice(0,a.indexOf(r))}function $t({theme:t,ownerState:n}){const{container:r,rowSpacing:a}=n;let s={};if(r&&a!==0){const o=re({values:a,breakpoints:t.breakpoints.values});let m;typeof o=="object"&&(m=Ee({breakpoints:t.breakpoints.values,values:o})),s=je({theme:t},o,(d,c)=>{var j;const p=t.spacing(d);return p!=="0px"?{marginTop:`-${Z(p)}`,[`& > .${ee.item}`]:{paddingTop:Z(p)}}:(j=m)!=null&&j.includes(c)?{}:{marginTop:0,[`& > .${ee.item}`]:{paddingTop:0}}})}return s}function Tt({theme:t,ownerState:n}){const{container:r,columnSpacing:a}=n;let s={};if(r&&a!==0){const o=re({values:a,breakpoints:t.breakpoints.values});let m;typeof o=="object"&&(m=Ee({breakpoints:t.breakpoints.values,values:o})),s=je({theme:t},o,(d,c)=>{var j;const p=t.spacing(d);return p!=="0px"?{width:`calc(100% + ${Z(p)})`,marginLeft:`-${Z(p)}`,[`& > .${ee.item}`]:{paddingLeft:Z(p)}}:(j=m)!=null&&j.includes(c)?{}:{width:"100%",marginLeft:0,[`& > .${ee.item}`]:{paddingLeft:0}}})}return s}function Pt(t,n,r={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[r[`spacing-xs-${String(t)}`]];const a=[];return n.forEach(s=>{const o=t[s];Number(o)>0&&a.push(r[`spacing-${s}-${String(o)}`])}),a}const At=he("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:r}=t,{container:a,direction:s,item:o,spacing:m,wrap:d,zeroMinWidth:c,breakpoints:j}=r;let p=[];a&&(p=Pt(m,j,n));const W=[];return j.forEach(b=>{const $=r[b];$&&W.push(n[`grid-${b}-${String($)}`])}),[n.root,a&&n.container,o&&n.item,c&&n.zeroMinWidth,...p,s!=="row"&&n[`direction-xs-${String(s)}`],d!=="wrap"&&n[`wrap-xs-${String(d)}`],...W]}})(({ownerState:t})=>M({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),kt,$t,Tt,Dt);function Ot(t,n){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const r=[];return n.forEach(a=>{const s=t[a];if(Number(s)>0){const o=`spacing-${a}-${String(s)}`;r.push(o)}}),r}const Et=t=>{const{classes:n,container:r,direction:a,item:s,spacing:o,wrap:m,zeroMinWidth:d,breakpoints:c}=t;let j=[];r&&(j=Ot(o,c));const p=[];c.forEach(b=>{const $=t[b];$&&p.push(`grid-${b}-${String($)}`)});const W={root:["root",r&&"container",s&&"item",d&&"zeroMinWidth",...j,a!=="row"&&`direction-xs-${String(a)}`,m!=="wrap"&&`wrap-xs-${String(m)}`,...p]};return fe(W,wt,n)},Mt=h.forwardRef(function(n,r){const a=xe({props:n,name:"MuiGrid"}),{breakpoints:s}=_e(),o=Ke(a),{className:m,columns:d,columnSpacing:c,component:j="div",container:p=!1,direction:W="row",item:b=!1,rowSpacing:$,spacing:O=0,wrap:q="wrap",zeroMinWidth:R=!1}=o,g=pe(o,It),N=$||O,I=c||O,P=h.useContext(ke),E=p?d||12:P,V={},f=M({},g);s.keys.forEach(k=>{g[k]!=null&&(V[k]=g[k],delete f[k])});const w=M({},o,{columns:E,container:p,direction:W,item:b,rowSpacing:N,columnSpacing:I,wrap:q,zeroMinWidth:R,spacing:O},V,{breakpoints:s.keys}),D=Et(w);return e.jsx(ke.Provider,{value:E,children:e.jsx(At,M({ownerState:w,className:ge(D.root,m),as:j,ref:r},f))})}),i=Mt;function Rt(){const[t,n]=h.useState(!1),[r,a]=h.useState({name:"",customerType:1,companyName:"",taxID:"",phone:"000",mobile:"",email:"",website:"",tags:"",internalNotes:"",sellerId:null,address:"",district:"",ward:"",province:"",zipCode:"000",country:"VIETNAM",customerId:0});h.useEffect(()=>{(async()=>{try{const N=await G.get("https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json");j(N.data)}catch(N){console.error("Error fetching data:",N)}})()},[]);const s=()=>{n(!0)},o=()=>{n(!1)},m=async g=>{if(g.preventDefault(),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){alert("Please enter a valid email address");return}if(!/^\d{10}$/.test(r.mobile)){alert("Please enter a 10-digit mobile number");return}console.log("Form submitted:",r);try{const P=localStorage.getItem("jwttoken");if(!P)throw new Error("Không tìm thấy mã token");const E=await G.post(`${L}/api/Customer/AddCustomer`,r,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`}});E.status===200?(console.log("Customer added successfully:",E.data),window.setTimeout(()=>{n(!1)},1e3),Q.fire({title:"Success",text:"Customer added successfully",icon:"success",timer:3e4,timerProgressBar:!0,showConfirmButton:!0}).then(V=>{V.isConfirmed&&window.location.reload()})):console.error("Failed to add customer")}catch(P){console.error("Failed to add customer:",P.message),window.setTimeout(()=>{n(!1)},1e3),Q.fire({title:"Error",text:"An error occurred while adding new customer. Please try again.",icon:"error",timer:3e4,timerProgressBar:!0,showConfirmButton:!0})}},d=g=>{a({...r,[g.target.name]:g.target.value})},[c,j]=h.useState([]),[p,W]=h.useState([]),[b,$]=h.useState([]),O=g=>{const N=g.target.value,I=c.find(P=>P.Id===N);I&&(W(I.Districts),$([]),a({...r,province:I.Name}))},q=g=>{const N=g.target.value,I=p.find(P=>P.Id===N);I&&($(I.Wards),a({...r,district:I.Name}))},R=g=>{const N=g.target.value;a({...r,ward:N})};return e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"contained",onClick:s,color:"inherit",startIcon:e.jsx(K,{icon:"eva:plus-fill"}),children:"New Customer"}),e.jsx(oe,{open:t,onClose:o,PaperProps:{style:{width:"1000px",maxWidth:"90vw"}},children:e.jsxs("form",{onSubmit:m,children:[e.jsxs(le,{style:{maxHeight:"4vw"},children:[" ",e.jsx("h2",{children:"NEW CUSTOMER"})," "]}),e.jsx(ce,{style:{margin:0},children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:6,children:e.jsxs(i,{container:!0,spacing:2,direction:"column",children:[e.jsx(i,{item:!0,style:{maxHeight:"4vw"},children:e.jsx("h3",{children:"Customer Information"})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Customer Name",id:"name",name:"name",value:r.name,onChange:d,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Company Name",id:"companyName",name:"companyName",value:r.companyName,onChange:d,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"TaxID",id:"taxID",name:"taxID",value:r.taxID,onChange:d,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Mobile",id:"mobile",name:"mobile",value:r.mobile,onChange:d,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Email",id:"email",name:"email",value:r.email,onChange:d,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Tags",id:"tags",name:"tags",value:r.tags,onChange:d,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Website",id:"website",name:"website",value:r.website,onChange:d,required:!0,fullWidth:!0})})]})}),e.jsx(i,{item:!0,xs:6,children:e.jsxs(i,{container:!0,spacing:2,direction:"column",children:[e.jsx(i,{item:!0,style:{maxHeight:"4vw"},children:e.jsx("h3",{children:"Customer Address"})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"Province"}),e.jsxs(H,{value:r.province,onChange:O,label:"Province",children:[e.jsx(S,{value:r.province,disabled:!0,children:r.province}),c.map(g=>e.jsx(S,{value:g.Id,children:g.Name},g.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"District"}),e.jsxs(H,{value:r.district,onChange:q,label:"District",children:[e.jsx(S,{value:r.district,disabled:!0,children:r.district}),p.map(g=>e.jsx(S,{value:g.Id,children:g.Name},g.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"Wards"}),e.jsxs(H,{value:r.ward,onChange:R,label:"Ward",children:[e.jsx(S,{value:r.ward,disabled:!0,children:r.ward}),b.map(g=>e.jsx(S,{value:g.Id,children:g.Name},g.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Address",id:"address",name:"address",value:r.address,onChange:d,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Internal Note",id:"internalNotes",name:"internalNotes",value:r.internalNotes,onChange:d,required:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsxs(de,{children:[e.jsx(_,{variant:"contained",onClick:o,color:"error",size:"medium",children:"Cancel"}),e.jsx(_,{variant:"contained",type:"submit",color:"success",size:"medium",children:"Add New Customer"})]})})]})})]})})]})})]})}function Me({query:t}){return e.jsx(ne,{children:e.jsx(A,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(Ye,{sx:{textAlign:"center"},children:[e.jsx(Y,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(Y,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}Me.propTypes={query:y.string};function Re({customerId:t}){const[n,r]=h.useState([]),[a,s]=h.useState(!0);if(h.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("jwttoken");if(!d)throw new Error("Không tìm thấy mã token");const c=await G.get(`${L}/api/Customer/${t}/quotations`,{headers:{Authorization:`Bearer ${d}`}});c.status===200?(r(c.data),s(!1)):console.error("Failed to fetch order history")}catch(d){console.error("Error fetching order history:",d.message)}})()},[t]),a)return e.jsx("div",{children:"Loading order history..."});function o(m){const d=new Date(m),c=d.getDate(),j=d.getMonth()+1,p=d.getFullYear(),W=c<10?`0${c}`:c,b=j<10?`0${j}`:j;return`${W}/${b}/${p}`}return e.jsx("div",{children:e.jsx("ul",{style:{listStyle:"none",padding:0,maxHeight:"500px",overflowY:"auto"},children:n.map((m,d)=>e.jsx("li",{children:e.jsx(Te,{sx:{minWidth:275},children:e.jsxs(Pe,{variant:"outlined",sx:{minWidth:275},style:{marginBottom:10},children:[e.jsxs(vt,{children:[e.jsxs(Y,{variant:"h5",component:"div",children:["Date: ",o(m.createdAt)]}),e.jsxs(Y,{variant:"h5",component:"div",children:["Total: ",m.total]})]}),e.jsx(pt,{children:e.jsx(_,{size:"small",children:"Detail Order"})})]})})},d))})})}Re.propTypes={customerId:y.number.isRequired};function ze({selected:t,name:n,avatarUrl:r,companyName:a,email:s,mobile:o,province:m,district:d,address:c,role:j,status:p,handleClick:W,customerId:b}){const[$,O]=h.useState(null),[q,R]=h.useState(!1),[g,N]=h.useState(!1),[I,P]=h.useState([]),[E,V]=h.useState([]),[f,w]=h.useState([]);h.useEffect(()=>{(async()=>{try{const x=await G.get("https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json");P(x.data)}catch(x){console.error("Error fetching data:",x)}})(),b!=null&&se(b)},[b]);const D=l=>{O(l.currentTarget)},k=()=>{O(null)},z=l=>{te({...X,[l.target.name]:l.target.value})},[X,te]=h.useState({name:"",customerType:1,companyName:"",taxID:"",phone:"000",mobile:"",email:"",website:"",tags:"",internalNotes:"",sellerId:null,address:"",district:"",ward:"",province:"",zipCode:"000",country:"VIETNAM",customerIdz:0}),He=async l=>{l.preventDefault();try{const x=await G.post(`${L}/api/Customer/AddCustomerX`,X,{headers:{"Content-Type":"application/json"}});console.log("Customer added successfully:",x.data),window.setTimeout(()=>{O(!1)},100),Q.fire({title:"Success",text:"Customer added successfully",icon:"success",timer:3e4,timerProgressBar:!0,showConfirmButton:!0}).then(v=>{v.isConfirmed&&window.location.reload()})}catch(x){console.error("Failed to add customer:",x.message),window.setTimeout(()=>{O(!1)},100),Q.fire({title:"Error",text:"An error occurred while add new customer. Please try again.",icon:"error",timer:3e4,timerProgressBar:!0,showConfirmButton:!0})}},Ge=async l=>{l.preventDefault();try{const x=localStorage.getItem("jwttoken"),v=await G.post(`${L}/api/Customer/UpdateCustomer`,u,{headers:{Authorization:`Bearer ${x}`}});console.log("Customer updated successfully:",v.data),window.setTimeout(()=>{R(!1)},1e3),Q.fire({title:"Success",text:"Customer updated successfully",icon:"success",timer:3e3,timerProgressBar:!0,showConfirmButton:!1})}catch(x){console.error("Failed to update customer:",x.message),window.setTimeout(()=>{N(!1)},1e3),Q.fire({title:"Error",text:"An error occurred while updating customer. Please try again.",icon:"error",timer:3e3,timerProgressBar:!0,showConfirmButton:!1})}},B=l=>{ae({...u,[l.target.name]:l.target.value})},Ce=()=>{R(!1)},ye=h.useCallback(()=>{const l=new Date,x=l.getFullYear(),v=l.getMonth()+1;let T;return v>=1&&v<=3?T=1:v>=4&&v<=6?T=2:v>=7&&v<=9?T=3:T=4,{currentYear:x,quarter:T}},[]),[ve,Ve]=h.useState(null),se=h.useCallback(async l=>{try{const{currentYear:x,quarter:v}=ye(),T=localStorage.getItem("jwttoken"),We=await G.put(`${L}/api/Customer/TotalOrderQuarter?customerId=${l}&year=${x}&quarter=${v}`,{},{headers:{Authorization:`Bearer ${T}`}});if(We.status===200){const Ie=We.data;console.log(Ie),Ve(Ie)}else console.error("Failed to fetch setCustomers")}catch(x){console.error("Error fetching total order value:",x)}},[ye]);h.useCallback(se,[se]);const be=l=>{const x=l.target.value,v=I.find(T=>T.Id===x);v&&(V(v.Districts),w([]),te({...X,province:v.Name}))},we=l=>{const x=l.target.value,v=E.find(T=>T.Id===x);v&&(w(v.Wards),te({...X,district:v.Name}))},Se=l=>{const x=l.target.value;te({...X,ward:x})},[u,ae]=h.useState({name:"",customerType:"",companyName:"",taxID:"",phone:"",mobile:"",email:"",website:"",tags:"",internalNotes:"",sellerId:"",address:"",district:"",ward:"",province:"",zipCode:"",country:"",customerId:""}),Le=async l=>{try{const x=localStorage.getItem("jwttoken");if(!x)throw new Error("Không tìm thấy mã token");const v=await G.get(`${L}/api/Customer/DetailCustomer/${l}`,{headers:{Authorization:`Bearer ${x}`}});if(v.status===200){const T=v.data;ae(T),R(!0)}else console.error("Failed to fetch setCustomers")}catch(x){console.error("Lỗi khi lấy thông tin chi tiết khách hàng:",x.message)}},qe=async l=>{try{const x=localStorage.getItem("jwttoken");if(!x)throw new Error("Không tìm thấy mã token");const v=await G.get(`${L}/api/Customer/DetailCustomer/${l}`,{headers:{Authorization:`Bearer ${x}`}});if(v.status===200){const T=v.data;ae(T),N(!0)}else console.error("Failed to fetch setCustomers")}catch(x){console.error("Lỗi khi lấy thông tin chi tiết khách hàng:",x.message)}},Ne=()=>{N(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(A,{padding:"checkbox",children:e.jsx(Oe,{disableRipple:!0,checked:t,onChange:W})}),e.jsx(A,{component:"th",scope:"row",padding:"none",children:e.jsxs(Ae,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(Qe,{alt:n,src:r}),e.jsx(Y,{variant:"subtitle2",noWrap:!0,children:n})]})}),e.jsx(A,{children:a}),e.jsx(A,{children:s}),e.jsx(A,{children:o}),e.jsx(A,{children:m}),e.jsx(A,{children:ve!==null?ve.toFixed(2):"Loading..."})," ",e.jsx(A,{children:c}),e.jsx(A,{align:"right",children:e.jsx(ie,{onClick:D,children:e.jsx(K,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(Ze,{open:!!$,anchorEl:$,onClose:k,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(S,{onClick:()=>Le(b),children:[e.jsx(K,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(S,{onClick:()=>qe(b),children:[e.jsx(K,{icon:"eva:menu-fill",sx:{mr:2}}),"Detail"]})]}),e.jsx(oe,{open:q,onClose:Ce,PaperProps:{style:{width:"1000px",maxWidth:"90vw"}},children:e.jsxs("form",{onSubmit:Ge,children:[e.jsxs(le,{style:{maxHeight:"4vw"},children:[" ",e.jsx("h2",{children:"UPDATE CUSTOMER"})," "]}),e.jsx(ce,{style:{margin:0},children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:6,children:e.jsxs(i,{container:!0,spacing:2,direction:"column",children:[e.jsx(i,{item:!0,style:{maxHeight:"4vw"},children:e.jsx("h3",{children:"Customer Information"})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Customer Name",id:"name",name:"name",value:u.name,onChange:B,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Company Name",id:"companyName",name:"companyName",value:u.companyName,onChange:B,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"TaxID",id:"taxID",name:"taxID",value:u.taxID,onChange:B,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Mobile",id:"mobile",name:"mobile",value:u.mobile,onChange:B,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Email",id:"email",name:"email",value:u.email,onChange:B,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Tags",id:"tags",name:"tags",value:u.tags,onChange:B,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Website",id:"website",name:"website",value:u.website,onChange:B,fullWidth:!0})})]})}),e.jsx(i,{item:!0,xs:6,children:e.jsxs(i,{container:!0,spacing:2,direction:"column",children:[e.jsx(i,{item:!0,style:{maxHeight:"4vw"},children:e.jsx("h3",{children:"Customer Address"})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"Province"}),e.jsxs(H,{value:u.province,onChange:be,label:u.province,children:[e.jsx(S,{value:u.province,disabled:!0,children:u.province}),I.map(l=>e.jsx(S,{value:l.Id,children:l.Name},l.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"District"}),e.jsxs(H,{value:u.district,onChange:we,label:"District",children:[e.jsx(S,{value:u.district,disabled:!0,children:u.district}),E.map(l=>e.jsx(S,{value:l.Id,children:l.Name},l.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"Wards"}),e.jsxs(H,{value:u.ward,onChange:Se,label:"Ward",children:[e.jsx(S,{value:u.ward,disabled:!0,children:u.ward}),f.map(l=>e.jsx(S,{value:l.Id,children:l.Name},l.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Address",id:"address",name:"address",value:u.address,onChange:B,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Internal Note",id:"internalNotes",name:"internalNotes",value:u.internalNotes,onChange:B,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsxs(de,{children:[e.jsx(_,{variant:"contained",onClick:Ce,color:"error",size:"medium",children:"Cancel"}),e.jsx(_,{variant:"contained",type:"submit",color:"success",size:"medium",children:"Update Customer"})]})})]})})]})})]})}),e.jsx(oe,{open:g,onClose:Ne,PaperProps:{style:{width:"1000px",maxWidth:"90vw",maxHeight:"90vh"}},children:e.jsxs("form",{onSubmit:He,children:[e.jsxs(le,{style:{maxHeight:"4vw",marginTop:0},children:[" ",e.jsx("h2",{children:"CUSTOMER DETAIL"})," "]}),e.jsx(ce,{children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:4,children:e.jsxs(i,{container:!0,spacing:2,direction:"column",children:[e.jsx(i,{item:!0,style:{maxHeight:"4vw"},children:e.jsx("h3",{children:"Customer Information"})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Customer Name",id:"name",name:"name",value:u.name,onChange:z,readOnly:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Company Name",id:"companyName",name:"companyName",value:u.companyName,onChange:z,readOnly:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"TaxID",id:"taxID",name:"taxID",value:u.taxID,onChange:z,readOnly:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Mobile",id:"mobile",name:"mobile",value:u.mobile,onChange:z,readOnly:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Email",id:"email",name:"email",value:u.email,onChange:z,readOnly:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Tags",id:"tags",name:"tags",value:u.tags,onChange:z,readOnly:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Website",id:"website",name:"website",value:u.website,onChange:z,readOnly:!0,fullWidth:!0})})]})}),e.jsx(i,{item:!0,xs:4,children:e.jsxs(i,{container:!0,spacing:2,direction:"column",children:[e.jsx(i,{item:!0,style:{maxHeight:"4vw"},children:e.jsx("h3",{children:"Customer Address"})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"Province"}),e.jsxs(H,{value:u.province,onChange:be,label:u.province,readOnly:!0,children:[e.jsx(S,{value:u.province,disabled:!0,children:u.province}),I.map(l=>e.jsx(S,{value:l.Id,children:l.Name},l.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"District"}),e.jsxs(H,{value:u.district,onChange:we,label:"District",readOnly:!0,children:[e.jsx(S,{value:u.district,disabled:!0,children:u.district}),E.map(l=>e.jsx(S,{value:l.Id,children:l.Name},l.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsxs(F,{fullWidth:!0,children:[e.jsx(U,{children:"Wards"}),e.jsxs(H,{value:u.ward,onChange:Se,label:"Ward",readOnly:!0,children:[e.jsx(S,{value:u.ward,disabled:!0,children:u.ward}),f.map(l=>e.jsx(S,{value:l.Id,children:l.Name},l.Id))]})]})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Address",id:"address",name:"address",value:u.address,onChange:z,readOnly:!0,fullWidth:!0})}),e.jsx(i,{item:!0,children:e.jsx(C,{type:"text",label:"Internal Note",id:"internalNotes",name:"internalNotes",value:u.internalNotes,onChange:z,readOnly:!0,fullWidth:!0})})]})}),e.jsx(i,{item:!0,xs:4,children:e.jsx(i,{container:!0,spacing:2,direction:"column",children:e.jsxs(i,{item:!0,style:{maxHeight:"4vw"},children:[e.jsx("h3",{children:"Customer Order History"}),e.jsx(Re,{customerId:b})]})})})]})}),e.jsx(de,{children:e.jsx(_,{variant:"contained",onClick:Ne,color:"error",size:"medium",children:"Cancel"})})]})})]})}ze.propTypes={avatarUrl:y.any,companyName:y.any,email:y.any,mobile:y.any,province:y.any,district:y.any,address:y.any,customerId:y.any,handleClick:y.func,name:y.any,role:y.any,selected:y.any,status:y.string};const zt={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Bt(t,n,r){return t?Math.max(0,(1+t)*n-r):0}function $e(t,n,r){return t[r]===null?1:n[r]===null||n[r]<t[r]?-1:n[r]>t[r]?1:0}function Ft(t,n){return t==="desc"?(r,a)=>$e(r,a,n):(r,a)=>-$e(r,a,n)}function Ut({inputData:t,comparator:n,filterName:r}){const a=t.map((s,o)=>[s,o]);return a.sort((s,o)=>{const m=n(s[0],o[0]);return m!==0?m:s[1]-o[1]}),t=a.map(s=>s[0]),r&&(t=t.filter(s=>s.name.toLowerCase().indexOf(r.toLowerCase())!==-1)),t}function Be({order:t,orderBy:n,rowCount:r,headLabel:a,numSelected:s,onRequestSort:o,onSelectAllClick:m}){const d=c=>j=>{o(j,c)};return e.jsx(nt,{children:e.jsxs(ne,{children:[e.jsx(A,{padding:"checkbox",children:e.jsx(Oe,{indeterminate:s>0&&s<r,checked:r>0&&s===r,onChange:m})}),a.map(c=>e.jsx(A,{align:c.align||"left",sortDirection:n===c.id?t:!1,sx:{width:c.width,minWidth:c.minWidth},children:e.jsxs(st,{hideSortIcon:!0,active:n===c.id,direction:n===c.id?t:"asc",onClick:d(c.id),children:[c.label,n===c.id?e.jsx(Te,{sx:{...zt},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},c.id))]})})}Be.propTypes={order:y.oneOf(["asc","desc"]),orderBy:y.string,rowCount:y.number,headLabel:y.array,numSelected:y.number,onRequestSort:y.func,onSelectAllClick:y.func};function Fe({emptyRows:t,height:n}){return t?e.jsx(ne,{sx:{...n&&{height:n*t}},children:e.jsx(A,{colSpan:9})}):null}Fe.propTypes={emptyRows:y.number,height:y.number};function Ue({numSelected:t,filterName:n,onFilterName:r}){return e.jsxs(Xe,{sx:{height:96,display:"flex",justifyContent:"space-between",p:a=>a.spacing(0,1,0,3),...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?e.jsxs(Y,{component:"div",variant:"subtitle1",children:[t," selected"]}):e.jsx(Je,{value:n,onChange:r,placeholder:"Search customer...",startAdornment:e.jsx(et,{position:"start",children:e.jsx(K,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),t>0?e.jsx(De,{title:"Delete",children:e.jsx(ie,{children:e.jsx(K,{icon:"eva:trash-2-fill"})})}):e.jsx(De,{title:"Filter list",children:e.jsx(ie,{children:e.jsx(K,{icon:"ic:round-filter-list"})})})]})}Ue.propTypes={numSelected:y.number,filterName:y.string,onFilterName:y.func};function Ht(){const[t,n]=h.useState(0),[r,a]=h.useState("asc"),[s,o]=h.useState([]),[m,d]=h.useState("name"),[c,j]=h.useState(""),[p,W]=h.useState(5),[b,$]=h.useState([]);h.useEffect(()=>{O()},[]);const O=async()=>{try{const f=localStorage.getItem("jwttoken"),w=await fetch(`${L}/api/Customer/GetCustomer`,{headers:{Authorization:`Bearer ${f}`}});if(w.ok){const D=await w.json();console.log(D),$(D)}else console.error("Failed to fetch setCustomers")}catch(f){console.error("Error fetching setCustomers:",f)}},q=(f,w)=>{w!==""&&(a(m===w&&r==="asc"?"desc":"asc"),d(w))},R=f=>{if(f.target.checked){const w=b.map(D=>D.name);o(w);return}o([])},g=(f,w)=>{const D=s.indexOf(w);let k=[];D===-1?k=k.concat(s,w):D===0?k=k.concat(s.slice(1)):D===s.length-1?k=k.concat(s.slice(0,-1)):D>0&&(k=k.concat(s.slice(0,D),s.slice(D+1))),o(k)},N=(f,w)=>{n(w)},I=f=>{n(0),W(parseInt(f.target.value,10))},P=f=>{n(0),j(f.target.value)},E=Ut({inputData:b,comparator:Ft(r,m),filterName:c}),V=!E.length&&!!c;return e.jsxs(ct,{children:[e.jsxs(Ae,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(Y,{variant:"h4",children:"Customer"}),e.jsx(Rt,{})," "]}),e.jsxs(Pe,{children:[e.jsx(Ue,{numSelected:s.length,filterName:c,onFilterName:P}),e.jsx(tt,{children:e.jsx(at,{sx:{overflow:"unset"},children:e.jsxs(it,{sx:{minWidth:800},children:[e.jsx(Be,{order:r,orderBy:m,rowCount:b.length,numSelected:s.length,onRequestSort:q,onSelectAllClick:R,headLabel:[{id:"name",label:"Name"},{id:"companyName",label:"Company"},{id:"email",label:"Email"},{id:"mobile",label:"Mobile No"},{id:"province",label:"Province"},{id:"Spend/Quarter",label:"Spend/Quarter"},{id:"address",label:"Address"},{id:""}]}),e.jsxs(ot,{children:[E.slice(t*p,t*p+p).map(f=>e.jsx(ze,{avatarUrl:f.avatarUrl,name:f.name,companyName:f.companyName,email:f.email,mobile:f.mobile,province:f.province,address:f.address,customerId:f.customerId,selected:s.indexOf(f.name)!==-1,handleClick:w=>g(w,f.name)},f.id)),e.jsx(Fe,{height:77,emptyRows:Bt(t,p,b.length)}),V&&e.jsx(Me,{query:c})]})]})})}),e.jsx(lt,{page:t,component:"div",count:b.length,rowsPerPage:p,onPageChange:N,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:I})]})]})}function Yt(){return e.jsxs(e.Fragment,{children:[e.jsx(rt,{children:e.jsx("title",{children:" User | Minimal UI "})}),e.jsx(Ht,{})]})}export{Yt as default};
